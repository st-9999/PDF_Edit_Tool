# PDF Edit Tool

ブラウザ上で動作するPDF編集ツール。基本操作はクライアントサイドで処理し、大容量ファイルの結合はサーバーサイドで自動処理します。

## 機能 (v1)

| 機能 | 説明 |
|------|------|
| ページ並び替え | ドラッグ&ドロップでページ順序を変更 |
| 複数PDF結合 | 複数ファイルを1つのPDFに結合（ファイル順序変更可） |
| ページ削除 | 選択したページを除外したPDFを生成 |
| ページ抽出 | 選択したページだけで新規PDFを生成 |
| ページ回転 | 個別 or 一括で 90°/180°/270° 回転 |
| しおり編集 | ツリー構造のブックマークを作成・編集（既存しおり読み込み対応） |

## セットアップ

### 前提条件

- Node.js 18 以上
- npm 9 以上

### インストール & 起動

```bash
# 依存パッケージのインストール
npm install

# 開発サーバー起動
npm run dev
```

ブラウザで http://localhost:3000 を開いてください。

### 本番ビルド

```bash
npm run build
npm start
```

http://localhost:3000 でアクセスできます。

## 使い方

1. トップページで4つの機能タブ（並び替え / 結合 / 抽出 / しおり）から選択
2. PDFファイルをドラッグ&ドロップ or クリックしてアップロード（最大500MB）
3. 各機能に応じた編集を行う
4. 「保存」ボタンで編集済みPDFを取得

### 結合の場合

1. 「結合」タブで複数のPDFファイルをアップロード
2. ファイルの順序を上下ボタンで調整
3. 「結合したPDFをダウンロード」をクリック

### しおり編集の場合

1. 「しおり」タブでPDFをアップロード
2. 「既存のしおりを読み込む」で既存ブックマークを取得（任意）
3. 「ルートしおりを追加」でしおりを作成
4. タイトルとページ番号を編集（サムネイルクリックでページ指定可）
5. 子しおり・兄弟しおりで階層構造を構築

## 技術スタック

- **フレームワーク**: Next.js 16 (App Router, TypeScript)
- **PDF操作**: pdf-lib (編集) / pdfjs-dist (レンダリング)
- **ドラッグ&ドロップ**: @dnd-kit
- **スタイリング**: Tailwind CSS v4
- **処理方式**: クライアントサイド主体 / 大容量結合時はサーバーサイド自動切り替え

## ディレクトリ構成

```
src/
├── app/                  # ページ・レイアウト
├── components/
│   ├── bookmark-editor/  # しおりエディタ
│   ├── file-uploader/    # ファイルアップロード・結合ファイルリスト
│   ├── page-selector/    # ページ選択（削除・抽出用）
│   ├── page-sorter/      # ページ並び替え（DnD）
│   ├── pdf-viewer/       # サムネイルグリッド
│   └── ui/               # Toast通知・処理中オーバーレイ
├── hooks/                # カスタムフック（use-pdf）
├── lib/
│   ├── pdf/              # PDF操作ロジック
│   └── utils/            # ユーティリティ
└── types/                # 型定義
```

## 制限事項

- ファイルサイズ上限: 500MB（結合時はサーバーサイド処理で大容量対応）
- パスワード付きPDF: 対応済み（`ignoreEncryption: true`）
- 結合以外の操作はクライアントサイドで処理されるため、非常に大きなPDFではメモリ不足の可能性あり

## ライセンス

Private
